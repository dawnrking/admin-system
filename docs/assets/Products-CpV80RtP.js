import{b as me}from"./data-CLL6An45.js";import{d as D,r as J,c as b,u as Q,_ as W,a as L,f as l,w as a,g as p,h as d,o as V,b as P,j as C,z as I,F as T,m as Z,k as v,A as pe,p as N,B as ve,t as z,n as fe,D as A,M as S}from"./index-DNoYCZF4.js";import{r as ge}from"./refresh-YmqVTgaT.js";import{e as ye}from"./edit-DcvCWjda.js";function R(r,n){var u=Object.keys(r);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(r);n&&(o=o.filter(function(c){return Object.getOwnPropertyDescriptor(r,c).enumerable})),u.push.apply(u,o)}return u}function q(r){for(var n=1;n<arguments.length;n++){var u=arguments[n]!=null?arguments[n]:{};n%2?R(Object(u),!0).forEach(function(o){W(r,o,u[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(u)):R(Object(u)).forEach(function(o){Object.defineProperty(r,o,Object.getOwnPropertyDescriptor(u,o))})}return r}var _e={tag:"svg",attrs:{fill:"none",viewBox:"0 0 24 24",width:"1em",height:"1em"},children:[{tag:"path",attrs:{fill:"currentColor",d:"M12 21C16.9706 21 21 16.9706 21 12C21 7.02944 16.9706 3 12 3C7.02944 3 3 7.02944 3 12C3 16.9706 7.02944 21 12 21ZM23 12C23 18.0751 18.0751 23 12 23C5.92487 23 0.999999 18.0751 1 12C1 5.92487 5.92487 0.999999 12 1C18.0751 1 23 5.92487 23 12ZM10.5 16.4142L6.08578 12L7.5 10.5858L10.5 13.5858L16.5 7.58579L17.9142 9L10.5 16.4142Z"}}]},be=D({name:"CheckCircleIcon",props:{size:{type:String},onClick:{type:Function}},setup(r,n){var{attrs:u}=n,o=b(()=>r.size),{className:c,style:f}=Q(o),g=b(()=>["t-icon","t-icon-check-circle",c.value]),h=b(()=>q(q({},f.value),u.style)),s=b(()=>({class:g.value,style:h.value,onClick:k=>{var m;return(m=r.onClick)===null||m===void 0?void 0:m.call(r,{e:k})}}));return()=>J(_e,s.value)}});function G(r,n){var u=Object.keys(r);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(r);n&&(o=o.filter(function(c){return Object.getOwnPropertyDescriptor(r,c).enumerable})),u.push.apply(u,o)}return u}function H(r){for(var n=1;n<arguments.length;n++){var u=arguments[n]!=null?arguments[n]:{};n%2?G(Object(u),!0).forEach(function(o){W(r,o,u[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(u)):G(Object(u)).forEach(function(o){Object.defineProperty(r,o,Object.getOwnPropertyDescriptor(u,o))})}return r}var Ce={tag:"svg",attrs:{fill:"none",viewBox:"0 0 24 24",width:"1em",height:"1em"},children:[{tag:"path",attrs:{fill:"currentColor",d:"M12 21C16.9706 21 21 16.9706 21 12C21 7.02944 16.9706 3 12 3C7.02944 3 3 7.02944 3 12C3 16.9706 7.02944 21 12 21ZM23 12C23 18.0751 18.0751 23 12 23C5.92487 23 0.999999 18.0751 1 12C1 5.92487 5.92487 0.999999 12 1C18.0751 1 23 5.92487 23 12ZM7.40347 15.1823L10.5858 12L7.40347 8.81768L8.81768 7.40347L12 10.5858L15.1816 7.40415L16.5959 8.81836L13.4142 12L16.5959 15.1816L15.1816 16.5959L12 13.4142L8.81768 16.5965L7.40347 15.1823Z"}}]},he=D({name:"CloseCircleIcon",props:{size:{type:String},onClick:{type:Function}},setup(r,n){var{attrs:u}=n,o=b(()=>r.size),{className:c,style:f}=Q(o),g=b(()=>["t-icon","t-icon-close-circle",c.value]),h=b(()=>H(H({},f.value),u.style)),s=b(()=>({class:g.value,style:h.value,onClick:k=>{var m;return(m=r.onClick)===null||m===void 0?void 0:m.call(r,{e:k})}}));return()=>J(Ce,s.value)}});const ke={class:"space-y-6"},we={class:"flex flex-wrap gap-4 items-end"},xe={class:"text-orange-500 font-semibold"},Oe={class:"flex gap-2"},Le=D({__name:"Products",setup(r){const n=p([...me]),u=p(!1),o=p(""),c=p(""),f=p(""),g=p(!1),h=p("新增商品"),s=p({}),k=p(!1),m=p({current:1,pageSize:10,total:0}),$=["电子产品","服饰鞋包","家居用品","电脑配件"],X=b(()=>{let i=n.value;return o.value&&(i=i.filter(e=>e.name.includes(o.value))),c.value&&(i=i.filter(e=>e.status===c.value)),f.value&&(i=i.filter(e=>e.category===f.value)),m.value.total=i.length,i}),Y=[{colKey:"id",title:"ID",width:80},{colKey:"image",title:"图片",width:100},{colKey:"name",title:"商品名称",width:200},{colKey:"category",title:"分类",width:120},{colKey:"price",title:"价格",width:120},{colKey:"stock",title:"库存",width:100},{colKey:"status",title:"状态",width:120},{colKey:"createTime",title:"创建时间",width:150},{colKey:"operation",title:"操作",width:200,fixed:"right"}],K=()=>{m.value.current=1},ee=()=>{o.value="",c.value="",f.value="",m.value.current=1},te=()=>{k.value=!1,h.value="新增商品",s.value={name:"",category:"",price:0,stock:0,status:"off_sale",image:"",description:""},g.value=!0},le=i=>{k.value=!0,h.value="编辑商品",s.value={...i},g.value=!0},ae=i=>{const e=A.confirm({header:"确认删除",body:`确定要删除商品"${i.name}"吗？`,confirmBtn:"确定",cancelBtn:"取消",onConfirm:()=>{n.value=n.value.filter(y=>y.id!==i.id),S.success("删除成功"),e.destroy()}})},B=i=>{const e=i.status==="on_sale"?"off_sale":"on_sale",y=e==="on_sale"?"上架":"下架",x=A.confirm({header:`确认${y}`,body:`确定要${y}商品"${i.name}"吗？`,confirmBtn:"确定",cancelBtn:"取消",onConfirm:()=>{const O=n.value.findIndex(_=>_.id===i.id);O!==-1&&(n.value[O].status=e,S.success(`${y}成功`)),x.destroy()}})},ne=()=>{if(!s.value.name||!s.value.category){S.warning("请填写完整信息");return}if(k.value){const i=n.value.findIndex(e=>e.id===s.value.id);i!==-1&&(n.value[i]={...n.value[i],...s.value},S.success("编辑成功"))}else{const i=Math.max(...n.value.map(e=>e.id))+1;n.value.unshift({...s.value,id:i,createTime:new Date().toISOString().split("T")[0]}),S.success("添加成功")}g.value=!1},U=i=>i==="on_sale"?{theme:"success",text:"在售"}:{theme:"default",text:"下架"};return(i,e)=>{const y=d("t-input"),x=d("t-option"),O=d("t-select"),_=d("t-button"),M=d("t-card"),oe=d("t-image"),re=d("t-tag"),se=d("t-table"),w=d("t-form-item"),E=d("t-input-number"),ie=d("t-textarea"),F=d("t-radio"),ue=d("t-radio-group"),de=d("t-form"),ce=d("t-dialog");return V(),L("div",ke,[l(M,{bordered:!1},{default:a(()=>[P("div",we,[l(y,{modelValue:o.value,"onUpdate:modelValue":e[0]||(e[0]=t=>o.value=t),placeholder:"搜索商品名称",clearable:"",style:{width:"200px"},onEnter:K},{"prefix-icon":a(()=>[l(C(I))]),_:1},8,["modelValue"]),l(O,{modelValue:c.value,"onUpdate:modelValue":e[1]||(e[1]=t=>c.value=t),placeholder:"状态筛选",clearable:"",style:{width:"150px"}},{default:a(()=>[l(x,{value:"on_sale",label:"在售"}),l(x,{value:"off_sale",label:"下架"})]),_:1},8,["modelValue"]),l(O,{modelValue:f.value,"onUpdate:modelValue":e[2]||(e[2]=t=>f.value=t),placeholder:"分类筛选",clearable:"",style:{width:"150px"}},{default:a(()=>[(V(),L(T,null,Z($,t=>l(x,{key:t,value:t,label:t},null,8,["value","label"])),64))]),_:1},8,["modelValue"]),l(_,{theme:"primary",onClick:K},{icon:a(()=>[l(C(I))]),default:a(()=>[e[12]||(e[12]=v(" 搜索 ",-1))]),_:1}),l(_,{theme:"default",onClick:ee},{icon:a(()=>[l(C(ge))]),default:a(()=>[e[13]||(e[13]=v(" 重置 ",-1))]),_:1}),e[15]||(e[15]=P("div",{class:"flex-1"},null,-1)),l(_,{theme:"primary",onClick:te},{icon:a(()=>[l(C(pe))]),default:a(()=>[e[14]||(e[14]=v(" 新增商品 ",-1))]),_:1})])]),_:1}),l(M,{bordered:!1},{default:a(()=>[l(se,{data:X.value,columns:Y,loading:u.value,pagination:m.value,"row-key":"id",hover:"",stripe:"",onPageChange:e[3]||(e[3]=t=>m.value.current=t.current)},{image:a(({row:t})=>[l(oe,{src:t.image,style:{width:"60px",height:"60px"},fit:"cover",shape:"round"},null,8,["src"])]),price:a(({row:t})=>[P("span",xe,"¥"+z(t.price.toLocaleString()),1)]),stock:a(({row:t})=>[P("span",{class:fe(t.stock===0?"text-red-500":"")},z(t.stock),3)]),status:a(({row:t})=>[l(re,{theme:U(t.status).theme,variant:"light"},{default:a(()=>[v(z(U(t.status).text),1)]),_:2},1032,["theme"])]),operation:a(({row:t})=>[P("div",Oe,[t.status==="off_sale"?(V(),N(_,{key:0,theme:"success",variant:"text",size:"small",onClick:j=>B(t)},{icon:a(()=>[l(C(be))]),default:a(()=>[e[16]||(e[16]=v(" 上架 ",-1))]),_:1},8,["onClick"])):(V(),N(_,{key:1,theme:"warning",variant:"text",size:"small",onClick:j=>B(t)},{icon:a(()=>[l(C(he))]),default:a(()=>[e[17]||(e[17]=v(" 下架 ",-1))]),_:1},8,["onClick"])),l(_,{theme:"primary",variant:"text",size:"small",onClick:j=>le(t)},{icon:a(()=>[l(C(ye))]),default:a(()=>[e[18]||(e[18]=v(" 编辑 ",-1))]),_:1},8,["onClick"]),l(_,{theme:"danger",variant:"text",size:"small",onClick:j=>ae(t)},{icon:a(()=>[l(C(ve))]),default:a(()=>[e[19]||(e[19]=v(" 删除 ",-1))]),_:1},8,["onClick"])])]),_:1},8,["data","loading","pagination"])]),_:1}),l(ce,{visible:g.value,"onUpdate:visible":e[11]||(e[11]=t=>g.value=t),header:h.value,width:"600px","confirm-on-enter":!0,onConfirm:ne},{default:a(()=>[l(de,{data:s.value,"label-width":"100px"},{default:a(()=>[l(w,{label:"商品名称",name:"name"},{default:a(()=>[l(y,{modelValue:s.value.name,"onUpdate:modelValue":e[4]||(e[4]=t=>s.value.name=t),placeholder:"请输入商品名称"},null,8,["modelValue"])]),_:1}),l(w,{label:"分类",name:"category"},{default:a(()=>[l(O,{modelValue:s.value.category,"onUpdate:modelValue":e[5]||(e[5]=t=>s.value.category=t),placeholder:"请选择分类"},{default:a(()=>[(V(),L(T,null,Z($,t=>l(x,{key:t,value:t,label:t},null,8,["value","label"])),64))]),_:1},8,["modelValue"])]),_:1}),l(w,{label:"价格",name:"price"},{default:a(()=>[l(E,{modelValue:s.value.price,"onUpdate:modelValue":e[6]||(e[6]=t=>s.value.price=t),min:0,"decimal-places":2,theme:"normal",style:{width:"100%"}},null,8,["modelValue"])]),_:1}),l(w,{label:"库存",name:"stock"},{default:a(()=>[l(E,{modelValue:s.value.stock,"onUpdate:modelValue":e[7]||(e[7]=t=>s.value.stock=t),min:0,theme:"normal",style:{width:"100%"}},null,8,["modelValue"])]),_:1}),l(w,{label:"图片链接",name:"image"},{default:a(()=>[l(y,{modelValue:s.value.image,"onUpdate:modelValue":e[8]||(e[8]=t=>s.value.image=t),placeholder:"请输入图片链接"},null,8,["modelValue"])]),_:1}),l(w,{label:"商品描述",name:"description"},{default:a(()=>[l(ie,{modelValue:s.value.description,"onUpdate:modelValue":e[9]||(e[9]=t=>s.value.description=t),placeholder:"请输入商品描述",maxlength:200},null,8,["modelValue"])]),_:1}),l(w,{label:"状态",name:"status"},{default:a(()=>[l(ue,{modelValue:s.value.status,"onUpdate:modelValue":e[10]||(e[10]=t=>s.value.status=t)},{default:a(()=>[l(F,{value:"on_sale"},{default:a(()=>[...e[20]||(e[20]=[v("上架",-1)])]),_:1}),l(F,{value:"off_sale"},{default:a(()=>[...e[21]||(e[21]=[v("下架",-1)])]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["data"])]),_:1},8,["visible","header"])])}}});export{Le as default};

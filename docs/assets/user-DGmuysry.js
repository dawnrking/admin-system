import{x as s,g as a}from"./index-B4wjXhve.js";import{l}from"./index-BJc8UowC.js";const g=s("user",()=>{const e=a(null),o=a(localStorage.getItem("token"));return{userInfo:e,token:o,login:async(r,n)=>{try{const t=await l(r,n);return o.value=t.token,localStorage.setItem("token",t.token),e.value={id:1,username:t.user.name,avatar:t.user.avatar||"https://images.unsplash.com/photo-1472099645785-5658abf4ff4e?w=100&h=100&fit=crop",role:"超级管理员"},!0}catch{return!1}},logout:()=>{o.value=null,e.value=null,localStorage.removeItem("token")},getUserInfo:()=>{o.value&&!e.value&&(e.value={id:1,username:"Admin",avatar:"https://images.unsplash.com/photo-1472099645785-5658abf4ff4e?w=100&h=100&fit=crop",role:"超级管理员"})}}});export{g as u};

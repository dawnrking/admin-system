import{m as G}from"./data-CLL6An45.js";import{d as H,a as c,b as f,f as t,w as n,g as u,c as z,h as s,o as _,j as V,z as J,F as w,m as x,k as y,A as Q,B as R,t as W,M as U}from"./index-DNoYCZF4.js";import{e as X}from"./edit-DcvCWjda.js";const Y={class:"space-y-6"},Z={class:"bg-white rounded-xl p-6 shadow-sm"},ee={class:"flex flex-wrap items-center gap-4"},le={class:"bg-white rounded-xl shadow-sm overflow-hidden"},te={class:"flex items-center space-x-2"},ue=H({__name:"Users",setup(ae){const d=u([...G]),r=u(""),h=u(""),g=u(""),p=u(!1),k=u(""),K=u(!1),a=u({name:"",email:"",phone:"",department:"",status:""}),D=["技术部","产品部","市场部","人事部","财务部","运营部"],S=["在职","离职","休假"],T=z(()=>d.value.filter(o=>{const l=!r.value||o.name.includes(r.value)||o.email.includes(r.value),i=!h.value||o.department===h.value,m=!g.value||o.status===g.value;return l&&i&&m})),B=[{colKey:"id",title:"ID",width:80},{colKey:"name",title:"姓名",width:100},{colKey:"email",title:"邮箱",width:200},{colKey:"phone",title:"手机号",width:140},{colKey:"department",title:"部门",width:120},{colKey:"status",title:"状态",width:100},{colKey:"createTime",title:"创建时间",width:120},{colKey:"operation",title:"操作",width:150,fixed:"right"}],E=()=>{k.value="添加用户",K.value=!1,a.value={name:"",email:"",phone:"",department:"",status:"在职"},p.value=!0},I=o=>{k.value="编辑用户",K.value=!0,a.value={...o},p.value=!0},M=()=>{if(!a.value.name||!a.value.email){U.warning("请填写必填项");return}if(K.value){const o=d.value.findIndex(l=>l.id===a.value.id);o!==-1&&(d.value[o]={...d.value[o],...a.value}),U.success("更新成功")}else{const o={id:Math.max(...d.value.map(l=>l.id))+1,name:a.value.name,email:a.value.email,phone:a.value.phone||"",department:a.value.department||"",status:a.value.status||"在职",createTime:new Date().toISOString().split("T")[0]};d.value.unshift(o),U.success("添加成功")}p.value=!1},N=o=>{d.value=d.value.filter(l=>l.id!==o.id),U.success("删除成功")},A=o=>({在职:"success",离职:"danger",休假:"warning"})[o]||"default",F=u({current:1,pageSize:10,total:z(()=>T.value.length)});return(o,l)=>{const i=s("t-input"),m=s("t-option"),b=s("t-select"),C=s("t-button"),O=s("t-tag"),$=s("t-popconfirm"),j=s("t-table"),v=s("t-form-item"),L=s("t-form"),P=s("t-dialog");return _(),c("div",Y,[f("div",Z,[f("div",ee,[t(i,{modelValue:r.value,"onUpdate:modelValue":l[0]||(l[0]=e=>r.value=e),placeholder:"搜索姓名或邮箱",clearable:"",style:{width:"240px"}},{"prefix-icon":n(()=>[t(V(J))]),_:1},8,["modelValue"]),t(b,{modelValue:h.value,"onUpdate:modelValue":l[1]||(l[1]=e=>h.value=e),placeholder:"选择部门",clearable:"",style:{width:"160px"}},{default:n(()=>[(_(),c(w,null,x(D,e=>t(m,{key:e,value:e,label:e},null,8,["value","label"])),64))]),_:1},8,["modelValue"]),t(b,{modelValue:g.value,"onUpdate:modelValue":l[2]||(l[2]=e=>g.value=e),placeholder:"选择状态",clearable:"",style:{width:"120px"}},{default:n(()=>[(_(),c(w,null,x(S,e=>t(m,{key:e,value:e,label:e},null,8,["value","label"])),64))]),_:1},8,["modelValue"]),l[10]||(l[10]=f("div",{class:"flex-1"},null,-1)),t(C,{theme:"primary",onClick:E},{icon:n(()=>[t(V(Q))]),default:n(()=>[l[9]||(l[9]=y(" 添加用户 ",-1))]),_:1})])]),f("div",le,[t(j,{data:T.value,columns:B,pagination:F.value,"row-key":"id",hover:"",stripe:""},{status:n(({row:e})=>[t(O,{theme:A(e.status),variant:"light"},{default:n(()=>[y(W(e.status),1)]),_:2},1032,["theme"])]),operation:n(({row:e})=>[f("div",te,[t(C,{theme:"primary",variant:"text",size:"small",onClick:q=>I(e)},{icon:n(()=>[t(V(X))]),default:n(()=>[l[11]||(l[11]=y(" 编辑 ",-1))]),_:1},8,["onClick"]),t($,{content:"确定要删除该用户吗？",onConfirm:q=>N(e)},{default:n(()=>[t(C,{theme:"danger",variant:"text",size:"small"},{icon:n(()=>[t(V(R))]),default:n(()=>[l[12]||(l[12]=y(" 删除 ",-1))]),_:1})]),_:1},8,["onConfirm"])])]),_:1},8,["data","pagination"])]),t(P,{visible:p.value,"onUpdate:visible":l[8]||(l[8]=e=>p.value=e),header:k.value,"confirm-on-enter":!0,onConfirm:M},{default:n(()=>[t(L,{data:a.value,"label-width":"80px"},{default:n(()=>[t(v,{label:"姓名",name:"name"},{default:n(()=>[t(i,{modelValue:a.value.name,"onUpdate:modelValue":l[3]||(l[3]=e=>a.value.name=e),placeholder:"请输入姓名"},null,8,["modelValue"])]),_:1}),t(v,{label:"邮箱",name:"email"},{default:n(()=>[t(i,{modelValue:a.value.email,"onUpdate:modelValue":l[4]||(l[4]=e=>a.value.email=e),placeholder:"请输入邮箱"},null,8,["modelValue"])]),_:1}),t(v,{label:"手机号",name:"phone"},{default:n(()=>[t(i,{modelValue:a.value.phone,"onUpdate:modelValue":l[5]||(l[5]=e=>a.value.phone=e),placeholder:"请输入手机号"},null,8,["modelValue"])]),_:1}),t(v,{label:"部门",name:"department"},{default:n(()=>[t(b,{modelValue:a.value.department,"onUpdate:modelValue":l[6]||(l[6]=e=>a.value.department=e),placeholder:"请选择部门"},{default:n(()=>[(_(),c(w,null,x(D,e=>t(m,{key:e,value:e,label:e},null,8,["value","label"])),64))]),_:1},8,["modelValue"])]),_:1}),t(v,{label:"状态",name:"status"},{default:n(()=>[t(b,{modelValue:a.value.status,"onUpdate:modelValue":l[7]||(l[7]=e=>a.value.status=e),placeholder:"请选择状态"},{default:n(()=>[(_(),c(w,null,x(S,e=>t(m,{key:e,value:e,label:e},null,8,["value","label"])),64))]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["data"])]),_:1},8,["visible","header"])])}}});export{ue as default};

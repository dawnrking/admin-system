import{a as z}from"./data-CLL6An45.js";import{d as ee,a as w,b as g,f as l,w as a,g as s,c as E,h as i,o as h,j as m,z as te,F as C,m as K,k as d,C as le,B as F,A as ae,t as U,M as r}from"./index-DNoYCZF4.js";import{r as oe}from"./refresh-YmqVTgaT.js";import{e as ne}from"./edit-DcvCWjda.js";const ue={class:"space-y-6"},se={class:"bg-white rounded-xl p-6 shadow-sm"},ie={class:"flex flex-wrap items-center gap-4"},de={class:"bg-white rounded-xl shadow-sm overflow-hidden"},re={class:"text-blue-600 font-medium"},me={class:"flex items-center space-x-2"},ye=ee({__name:"DataTable",setup(ce){const u=s([...z]),y=s(""),V=s(""),x=s(""),D=s(!1),_=s(!1),S=s(""),N=s(!1),o=s({orderNo:"",productName:"",category:"",price:0,quantity:0,status:""}),q=["电子产品","服饰鞋包","家居用品","电脑配件"],T=["已完成","进行中","待处理","已取消"],I=E(()=>u.value.filter(n=>{const t=!y.value||n.orderNo.includes(y.value)||n.productName.includes(y.value),b=!V.value||n.category===V.value,p=!x.value||n.status===x.value;return t&&b&&p})),M=[{colKey:"row-select",type:"multiple",width:50},{colKey:"id",title:"ID",width:60},{colKey:"orderNo",title:"订单号",width:140},{colKey:"productName",title:"商品名称",width:160},{colKey:"category",title:"分类",width:100},{colKey:"price",title:"单价",width:100},{colKey:"quantity",title:"数量",width:80},{colKey:"total",title:"总金额",width:120},{colKey:"status",title:"状态",width:100},{colKey:"createTime",title:"创建时间",width:120},{colKey:"operation",title:"操作",width:150,fixed:"right"}],c=s([]),O=()=>{S.value="添加数据",N.value=!1,o.value={orderNo:"ORD"+Date.now().toString().slice(-8),productName:"",category:"",price:0,quantity:1,status:"待处理"},_.value=!0},R=n=>{S.value="编辑数据",N.value=!0,o.value={...n},_.value=!0},A=()=>{if(!o.value.productName||!o.value.category){r.warning("请填写必填项");return}if(N.value){const n=u.value.findIndex(t=>t.id===o.value.id);n!==-1&&(u.value[n]={...u.value[n],...o.value}),r.success("更新成功")}else{const n={id:Math.max(...u.value.map(t=>t.id))+1,orderNo:o.value.orderNo,productName:o.value.productName,category:o.value.category,price:o.value.price||0,quantity:o.value.quantity||1,status:o.value.status||"待处理",createTime:new Date().toISOString().split("T")[0]};u.value.unshift(n),r.success("添加成功")}_.value=!1},L=n=>{u.value=u.value.filter(t=>t.id!==n.id),r.success("删除成功")},$=()=>{if(c.value.length===0){r.warning("请选择要删除的数据");return}u.value=u.value.filter(n=>!c.value.includes(n.id)),c.value=[],r.success("批量删除成功")},j=()=>{D.value=!0,setTimeout(()=>{u.value=[...z],D.value=!1,r.success("刷新成功")},500)},P=()=>{r.info("导出功能演示")},G=n=>({已完成:"success",进行中:"primary",待处理:"warning",已取消:"danger"})[n]||"default",H=s({current:1,pageSize:10,total:E(()=>I.value.length)});return(n,t)=>{const b=i("t-input"),p=i("t-option"),k=i("t-select"),v=i("t-button"),J=i("t-tag"),Q=i("t-popconfirm"),W=i("t-table"),f=i("t-form-item"),B=i("t-input-number"),X=i("t-form"),Y=i("t-dialog");return h(),w("div",ue,[g("div",se,[g("div",ie,[l(b,{modelValue:y.value,"onUpdate:modelValue":t[0]||(t[0]=e=>y.value=e),placeholder:"搜索订单号或商品名",clearable:"",style:{width:"240px"}},{"prefix-icon":a(()=>[l(m(te))]),_:1},8,["modelValue"]),l(k,{modelValue:V.value,"onUpdate:modelValue":t[1]||(t[1]=e=>V.value=e),placeholder:"选择分类",clearable:"",style:{width:"140px"}},{default:a(()=>[(h(),w(C,null,K(q,e=>l(p,{key:e,value:e,label:e},null,8,["value","label"])),64))]),_:1},8,["modelValue"]),l(k,{modelValue:x.value,"onUpdate:modelValue":t[2]||(t[2]=e=>x.value=e),placeholder:"选择状态",clearable:"",style:{width:"120px"}},{default:a(()=>[(h(),w(C,null,K(T,e=>l(p,{key:e,value:e,label:e},null,8,["value","label"])),64))]),_:1},8,["modelValue"]),t[15]||(t[15]=g("div",{class:"flex-1"},null,-1)),l(v,{variant:"outline",onClick:j},{icon:a(()=>[l(m(oe))]),default:a(()=>[t[11]||(t[11]=d(" 刷新 ",-1))]),_:1}),l(v,{variant:"outline",onClick:P},{icon:a(()=>[l(m(le))]),default:a(()=>[t[12]||(t[12]=d(" 导出 ",-1))]),_:1}),l(v,{theme:"danger",variant:"outline",disabled:c.value.length===0,onClick:$},{icon:a(()=>[l(m(F))]),default:a(()=>[t[13]||(t[13]=d(" 批量删除 ",-1))]),_:1},8,["disabled"]),l(v,{theme:"primary",onClick:O},{icon:a(()=>[l(m(ae))]),default:a(()=>[t[14]||(t[14]=d(" 添加数据 ",-1))]),_:1})])]),g("div",de,[l(W,{data:I.value,columns:M,pagination:H.value,loading:D.value,"selected-row-keys":c.value,"row-key":"id",hover:"",stripe:"",onSelectChange:t[3]||(t[3]=e=>c.value=e)},{price:a(({row:e})=>[d(" ¥"+U(e.price.toFixed(2)),1)]),total:a(({row:e})=>[g("span",re," ¥"+U((e.price*e.quantity).toLocaleString()),1)]),status:a(({row:e})=>[l(J,{theme:G(e.status),variant:"light"},{default:a(()=>[d(U(e.status),1)]),_:2},1032,["theme"])]),operation:a(({row:e})=>[g("div",me,[l(v,{theme:"primary",variant:"text",size:"small",onClick:Z=>R(e)},{icon:a(()=>[l(m(ne))]),default:a(()=>[t[16]||(t[16]=d(" 编辑 ",-1))]),_:1},8,["onClick"]),l(Q,{content:"确定要删除该数据吗？",onConfirm:Z=>L(e)},{default:a(()=>[l(v,{theme:"danger",variant:"text",size:"small"},{icon:a(()=>[l(m(F))]),default:a(()=>[t[17]||(t[17]=d(" 删除 ",-1))]),_:1})]),_:1},8,["onConfirm"])])]),_:1},8,["data","pagination","loading","selected-row-keys"])]),l(Y,{visible:_.value,"onUpdate:visible":t[10]||(t[10]=e=>_.value=e),header:S.value,"confirm-on-enter":!0,onConfirm:A},{default:a(()=>[l(X,{data:o.value,"label-width":"80px"},{default:a(()=>[l(f,{label:"订单号",name:"orderNo"},{default:a(()=>[l(b,{modelValue:o.value.orderNo,"onUpdate:modelValue":t[4]||(t[4]=e=>o.value.orderNo=e),placeholder:"请输入订单号",disabled:N.value},null,8,["modelValue","disabled"])]),_:1}),l(f,{label:"商品名称",name:"productName"},{default:a(()=>[l(b,{modelValue:o.value.productName,"onUpdate:modelValue":t[5]||(t[5]=e=>o.value.productName=e),placeholder:"请输入商品名称"},null,8,["modelValue"])]),_:1}),l(f,{label:"分类",name:"category"},{default:a(()=>[l(k,{modelValue:o.value.category,"onUpdate:modelValue":t[6]||(t[6]=e=>o.value.category=e),placeholder:"请选择分类"},{default:a(()=>[(h(),w(C,null,K(q,e=>l(p,{key:e,value:e,label:e},null,8,["value","label"])),64))]),_:1},8,["modelValue"])]),_:1}),l(f,{label:"单价",name:"price"},{default:a(()=>[l(B,{modelValue:o.value.price,"onUpdate:modelValue":t[7]||(t[7]=e=>o.value.price=e),min:0,"decimal-places":2,style:{width:"100%"}},null,8,["modelValue"])]),_:1}),l(f,{label:"数量",name:"quantity"},{default:a(()=>[l(B,{modelValue:o.value.quantity,"onUpdate:modelValue":t[8]||(t[8]=e=>o.value.quantity=e),min:1,style:{width:"100%"}},null,8,["modelValue"])]),_:1}),l(f,{label:"状态",name:"status"},{default:a(()=>[l(k,{modelValue:o.value.status,"onUpdate:modelValue":t[9]||(t[9]=e=>o.value.status=e),placeholder:"请选择状态"},{default:a(()=>[(h(),w(C,null,K(T,e=>l(p,{key:e,value:e,label:e},null,8,["value","label"])),64))]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["data"])]),_:1},8,["visible","header"])])}}});export{ye as default};
